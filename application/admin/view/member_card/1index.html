<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="_CSS_/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="_CSS_/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="_CSS_/style.css" />
    <script type="text/javascript" src="_JS_/jquery.js"></script>
    <script type="text/javascript" src="_JS_/bootstrap.js"></script>
    <script type="text/javascript" src="_JS_/ckform.js"></script>
    <script type="text/javascript" src="_JS_/common.js"></script>
    <script type="text/javascript" src="_JS_/bootstrap-paginator.js"></script>

    <style type="text/css">
        body {
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }
        .active a{
        	color:red;
        }
        .pagination li a{
        	margin-left:5px;
        }
        @media (max-width: 980px) {
            /* Enable use of floated navbar text */
            .navbar-text.pull-right {
                float: none;
                padding-left: 5px;
                padding-right: 5px;
            }
        }
        .lefttable{
        }
        .righttable{
        }
        .member_main{
        	height: 400px;
        }

    </style>
</head>
<body>
<body>
     <div>
              <div>
	<table class="table table-striped"  id='testTable' ></table>
</div>
<div style="text-align:right;">
	<ul id="example"></ul>
       </div>
   </div>
</body>
</body>
</html>
<script type="text/javascript">
		
		//ajax获取后台数据
		function initTable() {
		
		    var tbody="";
		    
			$.ajax({  
		   		type: 'POST',  
		   		dataType : "json",
		   		async:false,
		   		url: "{:URL('member_card/alist')}",//请求的action路径页面
			   	data: {"flag":true},  
		   		error: function(){ //请求失败处理函数  
		       		alert('请求失败');  
		   		},
		   		success:function(data){ //请求成功后处理函数。  
		       		 
		       		 tbody="<tr class='success'><th>设备标识号</td><th  align='center'>设备类别</td><th  align='center'>参数编码</td><th  align='center'>失效模式编码</td><th  align='center'>数据来源</td></tr>";
		       		 
		       		 $.each(data.list, function(i, n) {
                          var trs = "";
                          trs += "<tr><td align='center'>" + n.sbbsh + "</td><td align='center'>"+n.sblb+"</td><td align='center'>"+n.csbm+"</td><td align='center'>"+n.sxcode+"</td><td align='center'>"+n.sjly+"</td></tr>";
                      	  tbody+=trs; 
                     });
                     $("#testTable").html(tbody);  
                     
                     var pageCount = data.pageCount; //取到pageCount的值
					 var currentPage = data.CurrentPage; //得到currentPage
					 
					 var options = {
						bootstrapMajorVersion: 3, //版本
						currentPage: currentPage, //当前页数
						totalPages: pageCount, //总页数
						numberOfPages: 5,
						itemTexts: function (type, page, current) {
							switch (type) {
								case "first":
									return "首页";
								case "prev":
									return "上一页";
								case "next":
									return "下一页";
								case "last":
									return "末页";
								case "page":
									return page;
							}
						},//点击事件，用于通过Ajax来刷新整个list列表
						onPageClicked: function (event, originalEvent, type, page) {
							$.ajax({
								url: "{:URL('member_card/alist')}",
								type: "Post",
								dataType : "json",
								data: "page=" + page,
								success: function (data) {
								     tbody1="<tr class='success'><th>设备标识号</td><th  align='center'>设备类别</td><th  align='center'>参数编码</td><th  align='center'>失效模式编码</td><th  align='center'>数据来源</td></tr>";
								     
									 $.each(data.list, function(i, n) {
										 var trs = "";
				                          trs += "<tr><td align='center'>" + n.sbbsh + "</td><td align='center'>"+n.sblb+"</td><td align='center'>"+n.csbm+"</td><td align='center'>"+n.sxcode+"</td><td align='center'>"+n.sjly+"</td></tr>";
				                      	  tbody1+=trs; 
				                     });
				                     $("#testTable").html(tbody1);
								}
							});
						}
					};
					$('#example').bootstrapPaginator(options);
		   		}  
			});   				
		}

		$(document).ready(function(){
			initTable();
		});
		
  </script>