<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="_CSS_/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="_CSS_/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="_CSS_/style.css" />
    <script type="text/javascript" src="_JS_/jquery.js"></script>
    <script type="text/javascript" src="_JS_/jquery.sorted.js"></script>
    <script type="text/javascript" src="_JS_/bootstrap.js"></script>
    <script type="text/javascript" src="_JS_/ckform.js"></script>
    <script type="text/javascript" src="_JS_/common.js"></script>

    <style type="text/css">
        body {
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }

        @media (max-width: 980px) {
            /* Enable use of floated navbar text */
            .navbar-text.pull-right {
                float: none;
                padding-left: 5px;
                padding-right: 5px;
            }
        }


    </style>
</head>
<body>
<form action="" method="post" class="definewidth m20" >
<input type="hidden" name="role" value="{$role.id}" />
<table class="table table-bordered table-hover definewidth m10">
    <tr>
        <td width="10%" class="tableleft">角色</td>
        <td>{$role.name}</td>
    </tr>
    <tr>
        <td class="tableleft">权限</td>
        <td>
        <ul>
        	{foreach name="paces" item='v' key='k'}
        	<li><a href="#none" onclick="toggle(this)">[收缩/展开]</a><label class='checkbox inline'><input type='checkbox' name='aces[]' value='' />{$v.name}</label>
        		<ul>
        		{volist name="v.list" id="s" }
        			<li><label class='checkbox inline'><input type='checkbox' name='paces[{$s.id}]' value='1' {php}if(in_array($s['id'],$role_ace))echo 'checked';{/php} />{$s.name}</label></li>
        		{/volist}
        		</ul>
        	</li>
        	{/foreach}
        </ul>
        </td>
    </tr>
    <tr>
        <td class="tableleft"></td>
        <td>
            <button type="submit" class="btn btn-primary" type="button">保存</button> &nbsp;&nbsp;<button type="button" class="btn btn-success" id="backid">返回列表</button>
        </td>
    </tr>
</table>
</form>
</body>
</html>
<script>
    $(function () {
        $(':checkbox[name="aces[]"]').click(function () {
            $(':checkbox', $(this).closest('li')).prop('checked', this.checked);
        });

		$('#backid').click(function(){
				window.history.back();
		 });
    });
	function toggle(obj){
		$(obj).parent('li').find('ul').toggle();
	}
</script>